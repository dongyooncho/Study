# Median 찾기
## 1. 개요
[BOJ 1655. 가운데를 말해요](https://www.acmicpc.net/problem/1655) 문제 풀이 도중 `Median`을 찾는 과정에서 T.O가 계속 발생해서 검색해보았다. \
풀이 과정을 보다보니, 싸피에서 B형 특강 시간에 잠시 언급했던 기억이 나서 또 잊어버리지 않기 위해서 정리해봤다.

### Median
주어진 값들을 정렬했을 때, 가장 중앙에 놓인 값을 의미하며, 짝수개의 값은 두 중앙값의 평균을 취한다.
> [1, 2, 6, 10, 15] -> 6 \
> [1, 2, 6, 10, 15, 20] -> 8

이 데이터는 퀵 소트의 효율성을 높이는 데에도 사용된다.
[K 번째 원소를 찾는 알고리즘](https://modoocode.com/287)

## 2. Idea
### Max Heap & Min Heap
힙은 주어진 데이터 중 가장 크거나 작은 값을 맨 위로 보내는 성질이 있으며, \
새로운 데이터가 입력됐을 때 기존 값보다 더 크다면, 입력된 데이터가 맨 위로 올라가게 된다.

위의 문제에서는 데이터가 하나씩 입력되기 때문에 차례대로 입력받으면 Max Heap의 원소가 \
Min Heap의 원소보다 항상 1개 많거나 같도록 유지할 수 있다.

앞선 데이터를 이용해서 입력되는 과정을 살펴보면,

> Input: 1 \
> Max Heap: [`1`,] \
> Min Heap: [] \
> Median: `1`
>
> Input: 15 \
> Max Heap: [`1`,] \
> Min Heap: [`15`,] \
> Median: (`1` + `15`) / 2
>
> Input: 2 \
> Max Heap: [1, `2`] \
> Min Heap: [`15`,] \
> Median: `2`
> 
> Input: 20 \
> Max Heap: [1, `2`] \
> Min Heap: [`15`, 20] \
> Median: (`2` + `15`) / 2
> ...

여기서 주목할 점이 있다. \
두 힙에 나눠져 들어간 전체 데이터가 홀수개일 때, Max Heap의 최댓값은 항상 Median임을 볼수 있다.

이제 이어서 다음 데이터의 입력을 보자. \
예외 상황을 위해 보기와 조금 다른 데이터를 입력해 보겠다.

> Input: 17 \
> Max Heap: [1, 2, `17`] \
> Min Heap: [`15`, 20] \
> Median: 15

Min Heap의 Top 보다 Max Heap의 Top이 커지자 이 특징이 깨지는 것을 볼 수 있다. \
그 동안의 데이터는 `Max Heap | | Min Heap` 의 순서로 정렬되어 들어갔기 때문에 \
Max Heap의 Top이 항상 정 중앙에 위치하는 것을 볼 수 있었지만, 지금은 이 규칙이 깨진 상태다.

따라서 두 힙의 Top(`17`, `15`)을 서로 바꿔준다면,
> Max Heap: [1, 2, `15`]
> Min Heap: [`17`, 20]
> Median: `15`

다시 Max Heap의 Top에 중앙값이 위치하게 된다.

## 3. 정리
두개의 힙의 서로 다른 특징을 이용해서 `Median`을 쉽게 구하는 방법을 정리해보았다.\
물론 데이터를 정확하게 나눠 가져야한다는 점, Max Heap 내 요소들이 Min Heap 내 모든 요소들 보다 작아야 한다는 점 등 까다로운 조건이 붙지만,
**연속적인 데이터**를 입력받는 상황이 주어진다면 충분히 고려해볼만한 방법이라고 생각한다.

그리고 힙을 이용한 문제가 종종 보이는데, 그 때 마다 아이디어를 떠올리지 못해서 공부가 필요할 것 같다.
